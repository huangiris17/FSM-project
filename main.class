public class Main {
    public static void main(String[] args) {
        Map<String, MyState> mapState = new HashMap<>();
        Map<String, MyEvent> mapEvent = new HashMap<>();
        buildState(mapState);
        buildEvent(mapEvent);
        FSM myFSM = new FSM("myFSM", mapState.get("LISTEN"));
        Scanner sc = new Scanner(System.in);
        MyAction act = new MyAction();
        while(sc.hasNext()) {
            String s1 = sc.next();
            if(s1.equals("exit")) {
                break;
            }
            if (!mapEvent.containsKey(s1)) System.out.print("Error: unexpected Event:" + s1);
            else {
                MyEvent curEvent = mapEvent.get(s1);
                act.execute(myFSM, curEvent);
            }
        }
}
    }
    private void buildState(Map<String, MyState> mapState) {
        mapState.put("CLOSED", new MyState("CLOSED"));
        mapState.put("LISTEN", new MyState("LISTEN"));
        mapState.put("SYN_SENT", new MyState("SYN_SENT"));
        mapState.put("SYN_RCVD", new MyState("SYN_RCVD"));
        mapState.put("ESTABLISHED", new MyState("ESTABLISHED"));
        mapState.put("FIN_WAIT_1", new MyState("FIN_WAIT_1"));
        mapState.put("CLOSE_WAIT", new MyState("CLOSE_WAIT"));
        mapState.put("FIN_WAIT_2", new MyState("FIN_WAIT_2"));
        mapState.put("CLOSING", new MyState("CLOSING"));
        mapState.put("LAST_ACK", new MyState("LAST_ACK"));
        mapState.put("TIME_WAIT", new MyState("TIME_WAIT"));
    }
    private void buildEvent(Map<String, MyEvent> mapEvent) {
        mapState.put("PASSIVE", new MyState("PASSIVE"));
        mapState.put("ACTIVE", new MyState("ACTIVE"));
        mapState.put("SYN", new MyState("SYN"));
        mapState.put("SYNACK", new MyState("SYNACK"));
        mapState.put("ACK", new MyState("ACK"));
        mapState.put("RDATA", new MyState("RDATA"));
        mapState.put("SDATA", new MyState("SDATA"));
        mapState.put("FIN", new MyState("FIN"));
        mapState.put("CLOSE", new MyState("CLOSE"));
        mapState.put("TIMEOUT", new MyState("TIMEOUT"));
    }
}